# ç™¾åº¦é¦–é¡µæ–°é—»æ¨é€è„šæœ¬ ğŸ“°

> ä¸€ä¸ªè¿è¡Œåœ¨æ ‘è“æ´¾ä¸Šçš„è‡ªåŠ¨åŒ–æ–°é—»æ¨é€ç³»ç»Ÿï¼Œæ¯æ—¥å®šæ—¶å°†ç™¾åº¦é¦–é¡µçƒ­ç‚¹æ–°é—»å‘é€åˆ°ä½ çš„é‚®ç®±

## é¡¹ç›®ç®€ä»‹ âœ¨

è¿™æ˜¯ä¸€ä¸ªåŸºäºæ ‘è“æ´¾çš„è‡ªåŠ¨åŒ–æ–°é—»æ¨é€ç³»ç»Ÿï¼Œèƒ½å¤Ÿæ¯å¤©å®šæ—¶æŠ“å–ç™¾åº¦é¦–é¡µçš„çƒ­ç‚¹æ–°é—»ï¼Œå¹¶é€šè¿‡é‚®ä»¶å‘é€åˆ°æŒ‡å®šé‚®ç®±ã€‚é¡¹ç›®ä½¿ç”¨Pythonç¼–å†™ï¼Œå…·æœ‰ç¨³å®šçš„é”™è¯¯å¤„ç†æœºåˆ¶å’Œç¾è§‚çš„é‚®ä»¶æ¨¡æ¿ã€‚

### åŠŸèƒ½ç‰¹ç‚¹ ğŸŒŸ

- **è‡ªåŠ¨æŠ“å–**ï¼šæ¯æ—¥è‡ªåŠ¨è·å–ç™¾åº¦é¦–é¡µå‰10æ¡çƒ­ç‚¹æ–°é—»
- **ç¾è§‚é‚®ä»¶**ï¼šç²¾å¿ƒè®¾è®¡çš„HTMLé‚®ä»¶æ¨¡æ¿ï¼Œæ”¯æŒå“åº”å¼å¸ƒå±€
- **ç¨³å®šå¯é **ï¼šå¤šé‡é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œ
- **è¯¦ç»†æ—¥å¿—**ï¼šå®Œæ•´çš„è¿è¡Œæ—¥å¿—è®°å½•ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
- **æœ¬åœ°å¤‡ä»½**ï¼šè‡ªåŠ¨ä¿å­˜æ–°é—»å†…å®¹åˆ°æœ¬åœ°ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
- **é…ç½®çµæ´»**ï¼šæ”¯æŒå¤šç§é‚®ç®±æœåŠ¡å•†ï¼Œé…ç½®ç®€å•æ˜“ç”¨

## ç³»ç»Ÿè¦æ±‚ ğŸ–¥ï¸

### ç¡¬ä»¶è¦æ±‚

- æ ‘è“æ´¾3B+ æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨èæ ‘è“æ´¾4Bï¼‰
- ç¨³å®šçš„ç½‘ç»œè¿æ¥
- è‡³å°‘1GBå¯ç”¨å­˜å‚¨ç©ºé—´

### è½¯ä»¶è¦æ±‚

- Python 3.6+
- æ ‘è“æ´¾OSï¼ˆRaspbianï¼‰æˆ–å…¶å®ƒLinuxå‘è¡Œç‰ˆ
- æ”¯æŒSMTPçš„é‚®ç®±è´¦å·ï¼ˆQQé‚®ç®±ã€163é‚®ç®±ã€Gmailç­‰ï¼‰

## å®‰è£…éƒ¨ç½² ğŸš€

### 1. å…‹éš†é¡¹ç›®ä»£ç 

```
git clone https://github.com/huangleicole/raspberry-pi-baidu-news-crawler.git
cd raspberry-pi-baidu-news-crawler
```

### 2. å®‰è£…ä¾èµ–åŒ…

```
pip3 install requests beautifulsoup4
```

### 3. é…ç½®é‚®ç®±ä¿¡æ¯

åˆ›å»º `email_config.json`æ–‡ä»¶ï¼š

```
{
    "smtp_server": "smtp.126.com",
    "smtp_port": 465,
    "sender_email": "your_email@126.com",
    "sender_password": "your_authorization_code",
    "receiver_email": "receiver@example.com",
    "use_ssl": true,
    "use_tls": false
}
```

**æ³¨æ„**ï¼š`sender_password`åº”ä½¿ç”¨é‚®ç®±çš„æˆæƒç ï¼Œè€Œéç™»å½•å¯†ç ã€‚

### 4. æµ‹è¯•è¿è¡Œ

```
python3 baidu_homepage_news.py
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ å°†æ”¶åˆ°æµ‹è¯•é‚®ä»¶ã€‚

## å®šæ—¶ä»»åŠ¡è®¾ç½® â°

### ä½¿ç”¨crontabè®¾ç½®æ¯æ—¥å®šæ—¶ä»»åŠ¡

1. ç¼–è¾‘crontabï¼š

```
crontab -e
```

1. æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆç¤ºä¾‹ä¸ºæ¯å¤©ä¸Šåˆ8ç‚¹è¿è¡Œï¼‰ï¼š

```
0 8 * * * cd /home/pi/baidu-news-pusher && /usr/bin/python3 baidu_homepage_news.py >> /var/log/baidu_news.log 2>&1
```

1. ä¿å­˜å¹¶é€€å‡ºï¼Œcronå°†è‡ªåŠ¨åŠ è½½æ–°é…ç½®

### å…¶ä»–å®šæ—¶é€‰é¡¹

```
# æ¯å¤©ä¸Šåˆ8ç‚¹
0 8 * * * 

# å·¥ä½œæ—¥æ—©ä¸Š9ç‚¹
0 9 * * 1-5

# æ¯6å°æ—¶ä¸€æ¬¡
0 */6 * * *

# å‘¨æœ«æ—©ä¸Š10ç‚¹
0 10 * * 6,7
```



## é…ç½®è¯´æ˜ âš™ï¸

### é‚®ç®±æœåŠ¡å•†é…ç½®ç¤ºä¾‹

**QQé‚®ç®±é…ç½®ï¼š**

```
{
    "smtp_server": "smtp.qq.com",
    "smtp_port": 465,
    "use_ssl": true,
    "use_tls": false
}
```

**163é‚®ç®±é…ç½®ï¼š**

```
{
    "smtp_server": "smtp.163.com",
    "smtp_port": 465,
    "use_ssl": true,
    "use_tls": false
}
```

**Gmailé…ç½®ï¼š**

```
{
    "smtp_server": "smtp.gmail.com",
    "smtp_port": 587,
    "use_ssl": false,
    "use_tls": true
}
```

### è·å–é‚®ç®±æˆæƒç 

1. **QQé‚®ç®±**ï¼šè®¾ç½® â†’ è´¦æˆ· â†’ å¼€å¯POP3/SMTPæœåŠ¡ â†’ ç”Ÿæˆæˆæƒç 
2. **163é‚®ç®±**ï¼šè®¾ç½® â†’ POP3/SMTP/IMAP â†’ å¼€å¯SMTPæœåŠ¡ â†’ è®¾ç½®æˆæƒç 
3. **Gmail**ï¼šè´¦å·è®¾ç½® â†’ å®‰å…¨æ€§ â†’ å¼€å¯ä¸¤æ­¥éªŒè¯ â†’ ç”Ÿæˆåº”ç”¨ä¸“ç”¨å¯†ç 

## æ•…éšœæ’é™¤ ğŸ”§

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**1. ç½‘ç»œè¿æ¥å¤±è´¥**

```
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping www.baidu.com

# æ£€æŸ¥DNSè§£æ
nslookup www.baidu.com
```

**2. é‚®ä»¶å‘é€å¤±è´¥**

- æ£€æŸ¥é‚®ç®±é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ä½¿ç”¨æˆæƒç è€Œéç™»å½•å¯†ç 
- æ£€æŸ¥é‚®ç®±æ˜¯å¦å¼€å¯SMTPæœåŠ¡

**3. è„šæœ¬æƒé™é—®é¢˜**

```
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x baidu_homepage_news.py

# ä½¿ç”¨å®Œæ•´è·¯å¾„æ‰§è¡Œ
/usr/bin/python3 /path/to/baidu_homepage_news.py
```

**4. ä¾èµ–åŒ…å®‰è£…å¤±è´¥**

```
# ä½¿ç”¨å›½å†…é•œåƒæº
pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple requests beautifulsoup4
```

### æ—¥å¿—æŸ¥çœ‹

è„šæœ¬è¿è¡Œæ—¥å¿—ä¿å­˜åœ¨ä»¥ä¸‹ä½ç½®ï¼š

- ç³»ç»Ÿæ—¥å¿—ï¼š`/var/log/baidu_homepage_news.log`
- æ§åˆ¶å°è¾“å‡ºï¼šç›´æ¥è¿è¡Œæ—¶çš„ç»ˆç«¯è¾“å‡º
- å¤‡ä»½æ–‡ä»¶ï¼š`/home/send_news/backups/`ç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶

æŸ¥çœ‹æœ€æ–°æ—¥å¿—ï¼š

```
tail -f /var/log/baidu_homepage_news.log
```

## è‡ªå®šä¹‰å¼€å‘ ğŸ› ï¸

### ä¿®æ”¹æ–°é—»æº

å¦‚éœ€æŠ“å–å…¶ä»–ç½‘ç«™çš„æ–°é—»ï¼Œä¿®æ”¹ `BaiduHomepageNewsCollector`ç±»ä¸­çš„è§£æé€»è¾‘ï¼š

```
def fetch_custom_news(self):
    # è‡ªå®šä¹‰æ–°é—»æŠ“å–é€»è¾‘
    url = "https://news.your-site.com"
    response = requests.get(url)
    # è§£æé€»è¾‘...
```

### ä¿®æ”¹é‚®ä»¶æ¨¡æ¿

ç¼–è¾‘ `EmailSender`ç±»ä¸­çš„ `create_email_content`æ–¹æ³•ï¼š

```
def create_email_content(self, news_items):
    # è‡ªå®šä¹‰HTMLæ¨¡æ¿
    html_content = """
    <!DOCTYPE html>
    <html>
    <!-- ä½ çš„è‡ªå®šä¹‰æ¨¡æ¿ -->
    </html>
    """
    return html_content
```

### æ·»åŠ æ–°çš„æ¨é€æ¸ é“

ç»§æ‰¿åŸºç¡€ç±»å®ç°æ–°çš„æ¨é€æ–¹å¼ï¼š

```
class WechatSender(EmailSender):
    def send_to_wechat(self, news_items):
        # å®ç°å¾®ä¿¡æ¨é€é€»è¾‘
        pass
```

## æŠ€æœ¯ç»†èŠ‚ ğŸ”

### æ ¸å¿ƒç»„ä»¶

1. **BaiduHomepageNewsCollector** ç½‘ç»œè¯·æ±‚ä¸HTMLè§£æ æ–°é—»å†…å®¹æå–å’Œæ¸…æ´— å¤šé‡å¤‡é€‰è§£æç­–ç•¥
2. **EmailSender** SMTPé‚®ä»¶å‘é€ HTMLé‚®ä»¶æ¨¡æ¿æ¸²æŸ“ é”™è¯¯é‡è¯•æœºåˆ¶
3. **æ—¥å¿—ç³»ç»Ÿ** å¤šçº§åˆ«æ—¥å¿—è®°å½• æ–‡ä»¶å’Œæ§åˆ¶å°åŒè¾“å‡º è¿è¡ŒçŠ¶æ€ç›‘æ§

### æ€§èƒ½ä¼˜åŒ–

- è¯·æ±‚è¶…æ—¶è®¾ç½®ï¼ˆ10ç§’ï¼‰
- è¿æ¥é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š3æ¬¡ï¼‰
- å†…å­˜å‹å¥½çš„å¤§æ–‡ä»¶å¤„ç†
- å¼‚å¸¸æƒ…å†µä¸‹çš„ä¼˜é›…é™çº§

------

**æ¸©é¦¨æç¤º**ï¼šè¯·åˆç†ä½¿ç”¨æœ¬å·¥å…·ï¼Œéµå®ˆç›¸å…³ç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„è¯·æ±‚å¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚
